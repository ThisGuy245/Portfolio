---
import Nav from '../../components/Nav.astro'; // Adjust the path as necessary
import { languages } from '../../i18n/ui';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';
import Layout from '../../layouts/Layout.astro';
import { getSortedPosts, getPopularPosts } from '../../util/posts';

const recentPosts = getSortedPosts().slice(0, 5);
const popularPosts = getPopularPosts().slice(0, 5);

export async function getStaticPaths() {
    return languages.map(lang => ({ params: { lang: lang.key } }));
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const web = await Astro.glob('../../content/web/*.mdx');
---

<Layout title={t('Welcome')}>
    <Nav lang={lang} />

    <!-- Main content container with padding to avoid overlap with navbar -->
    <main class="main-content">
        <header class="header">
            <img src="/Face.jpg" alt="Profile Picture" class="face-image" />
            <blockquote class="quote">
                <em>"This is a placeholder waiting for the existential life-changing and awe-inspiring quote!  ------ - Great Engineer Thommy 2024"</em>
            </blockquote>
            <div class="navbar-icons">
                <a href="https://www.linkedin.com" target="_blank">
                    <img src="/linkedin.svg" alt="LinkedIn">
                </a>
                <a href="https://www.github.com" target="_blank">
                    <img src="/github.svg" alt="GitHub">
                </a>
                <a href="mailto:thomasisherwood@outlook.com" target="_blank">
                    <img src="/envelope-solid.svg" alt="Email">
                </a>
            </div>
        </header>

        <section class="introduction">
            <div class="intro-bubble">
                <h2>{t('Who I Am')}</h2>
                <p>{t('I am a passionate game software engineer specializing in Games, Music, and Web development. I enjoy creating immersive experiences and innovative solutions.')}</p>
            </div>
        </section>

        <section class="about-me">
            <div class="skills-sidebar">
                <h2>Skills</h2>
                <ul>
                    <li>Skill 1</li>
                    <li>Skill 2</li>
                    <li>Skill 3</li>
                    <li>Skill 4</li>
                    <li>Skill 5</li>
                    <li>Skill 6</li>
                    <li>Skill 7</li>
                </ul>
            </div>
            <div class="about-content">
                <h2>{t('About Me')}</h2>
                <p>{t('I am a passionate game software engineer with experience in creating immersive gaming experiences. Specializing in game development and design, I enjoy bringing virtual worlds to life.')}</p>
            </div>
        </section>

        <section class="recent-posts">
            <h2>{t('Popular Posts')}</h2>
            <ul>
                {popularPosts.map(post => (
                        <li key={post.id}>
                            <a href={`/posts/${post.id}`}>{post.title}</a>
                        </li>
                ))}
            </ul>
        </section>

        <section class="skills">
            <h2>Skills</h2>

            <!-- Web Development Skills -->
            <div class="skills-category">
                <h3>Web Development</h3>
                <div class="skills-icons">
                    <div class="icon" data-tooltip="Webstorm">
                        <img src="/devicons/Webstorm.svg" alt="Webstorm Icon" />
                    </div>
                    <div class="icon" data-tooltip="VSCode">
                        <img src="/devicons/VSCode.svg" alt="VSCode Icon" />
                    </div>
                    <div class="icon" data-tooltip="TypeScript">
                        <img src="/devicons/TypeScript.svg" alt="TypeScript Icon" />
                    </div>
                    <!-- Add more web-related icons similarly -->
                </div>
            </div>

            <!-- Game Development Skills -->
            <div class="skills-category">
                <h3>Game Development</h3>
                <div class="skills-icons">
                    <div class="icon" data-tooltip="Unity">
                        <img src="/devicons/Unity.svg" alt="Unity Icon" />
                    </div>
                    <div class="icon" data-tooltip="Unreal">
                        <img src="/devicons/Unreal.svg" alt="Unreal Icon" />
                    </div>
                    <div class="icon" data-tooltip="Godot">
                        <img src="/devicons/Godot.svg" alt="Godot Icon" />
                    </div>
                    <!-- Add more game-related icons similarly -->
                </div>
            </div>
        </section>

        <section class="web-content">
            <h2>{t('Web Projects')}</h2>
            <ul>
                {web.map(w => (
                        <li key={w.slug}>
                            <w.Content />
                        </li>
                ))}
            </ul>
        </section>
    </main>
</Layout>

<style>
    /* Spacing between navbar and page content */
    .main-content {
        padding-top: 80px; /* Adjust based on navbar height */
        padding: 0 20px;
    }

    .header {
        text-align: center;
        margin-bottom: 40px;
    }

    .face-image {
        border-radius: 50%;
        width: 150px;
        height: 150px;
        object-fit: cover;
        margin-bottom: 20px;
    }

    .quote {
        font-style: italic;
        color: #bbb;
        margin-bottom: 30px;
    }

    .navbar-icons {
        display: flex;
        justify-content: center;
        gap: 20px;
    }

    .navbar-icons a img {
        width: 30px;
        height: 30px;
    }

    .introduction, .about-me, .recent-posts, .web-content {
        margin-bottom: 40px;
    }

    .intro-bubble {
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        max-width: 800px;
        margin: 0 auto;
    }

    .skills-sidebar {
        float: left;
        width: 30%;
        margin-right: 40px;
    }

    .skills-sidebar h2 {
        margin-bottom: 20px;
    }

    .about-content {
        float: right;
        width: 65%;
    }

    .about-content h2 {
        margin-bottom: 20px;
    }

    .recent-posts ul, .web-content ul {
        list-style: none;
        padding: 0;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
    }

    .recent-posts li, .web-content li {
        background: rgba(0, 0, 0, 0.1);
        padding: 15px;
        border-radius: 10px;
        text-align: center;
    }

    .recent-posts li a, .web-content li a {
        color: #fff;
        text-decoration: none;
    }

    .recent-posts li a:hover, .web-content li a:hover {
        color: var(--accent-color);
    }

    .clear-fix:after {
        content: "";
        display: table;
        clear: both;
    }
    .skills {
        text-align: center;
        margin-bottom: 40px;
    }

    .skills-category {
        margin-top: 20px;
    }

    .skills-icons {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 15px;
    }

    .icon {
        position: relative;
        width: 50px;
        height: 50px;
        display: inline-block;
        cursor: pointer;
    }

    .icon img {
        width: 100%;
        height: auto;
        transition: transform 0.2s ease-in-out;
    }

    .icon:hover img {
        transform: scale(1.1);
    }

    /* Tooltip styling */
    .icon[data-tooltip]:hover::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: -25px;
        left: 50%;
        transform: translateX(-50%);
        background-color: rgba(0, 0, 0, 0.8);
        color: #fff;
        padding: 5px 10px;
        border-radius: 5px;
        white-space: nowrap;
        font-size: 12px;
        opacity: 1;
        visibility: visible;
        z-index: 10;
    }

    .icon::after {
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.2s;
    }

</style>
