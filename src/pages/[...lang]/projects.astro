---
import { useState } from 'react';
import Card from '../../components/Card.astro';

// Import MDX files
import CybervadersContent from '../../content/Games/Cybervaders.mdx';
import PortfolioContent from '../../content/Web/Portfolio.mdx';
import LeDomaineContent from '../../content/Web/Le-Domaine.mdx';

// Define the project metadata
const allProjects = [
    {
        id: 1,
        category: 'Games',
        title: 'Cybervaders (2024)',
        body: 'This project is a take on the Space Shooter genre...',
        href: '#',
        videoSrc: '/media/bug_shooter.mp4',
        placeholderImg: '/media/placeholder.png',
        content: CybervadersContent,
    },
    {
        id: 2,
        category: 'Web',
        title: 'Portfolio (2024)',
        body: 'This project is a site for my portfolio...',
        href: '#',
        placeholderImg: '/media/placeholder.png',
        content: PortfolioContent,
    },
    {
        id: 3,
        category: 'Web',
        title: 'Le Domaine (2024)',
        body: 'Le Domaine is a site for a Guesthouse in...',
        href: '#',
        placeholderImg: '/media/placeholder.png',
        content: LeDomaineContent,
    },
];

const [activeCategory, setActiveCategory] = useState('All');

const categories = ['All', 'Games', 'Web', 'Music', 'Other'];

const filteredProjects = activeCategory === 'All'
    ? allProjects
    : allProjects.filter(project => project.category === activeCategory);
---

<div class="filter-container">
    {categories.map(category => (
            <button
                    class={activeCategory === category ? 'active' : ''}
                    onClick={() => setActiveCategory(category)}
            >
                {category}
            </button>
    ))}
</div>

<div class="projects-grid">
    {filteredProjects.map(project => (
            <Card project={project} key={project.id} />
    ))}
</div>

<style>
    .filter-container {
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
    }
    .filter-container button {
        padding: 10px 20px;
        margin: 0 5px;
        border: none;
        border-radius: 5px;
        background-color: #23262d;
        color: white;
        cursor: pointer;
        transition: background-color 0.3s ease;
    }
    .filter-container button.active {
        background-color: var(--accent-color);
    }
    .filter-container button:hover {
        background-color: var(--accent-light);
    }
    .projects-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
    }
</style>
